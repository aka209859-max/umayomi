# JRA-VAN データ構造分析レポート

**作成日**: 2026-01-01  
**プロジェクト**: UMAYOMI（ウマヨミ）  
**CEO**: Enable CEO / AI戦略家

---

## 📊 データ移動完了サマリー

### Cドライブ解放完了
- **C:\TFJV → E:\JRAVAN**: 5.64GB、45,339ファイル ✅
- **C:\JRDB → E:\JRDB**: 3.87GB、21,536ファイル ✅
- **合計解放**: 9.51GB のCドライブ空き容量を確保

### 最終的なデータ配置

| 場所 | サイズ | ファイル数 | 内容 |
|------|--------|------------|------|
| **E:\JRAVAN** | 5.64GB | 45,339 | JRA-VAN データ（全データ） |
| **E:\JRDB** | 4.16GB | 25,648 | JRDB データ（統合完了） |
| **合計** | **9.80GB** | **70,987** | 競馬データ総量 |

---

## 📁 JRA-VAN データ構造の詳細

### 主要フォルダ（サイズ順）

| フォルダ | ファイル数 | サイズ | 内容 | データ期間 |
|----------|-----------|--------|------|------------|
| **HY_DATA** | 6,076 | 1.91GB | 馬データ | 1986-2025 |
| **SE_DATA** | 6,217 | 1.86GB | レース成績データ | 1954-2026 |
| **ES_DATA** | 11,484 | 0.64GB | 拡張成績データ | 1986-2025 |
| **CK_DATA** | 17,622 | 0.59GB | 血統データ | 2003-2025 |
| **UM_DATA** | 601 | 0.48GB | 馬基本データ | 1936-2025 |
| **KT_DATA** | 279 | 0.05GB | 競馬場・調教データ | - |
| **BY_DATA** | 273 | 0.02GB | 払戻金データ | 1996-2024 |
| **DE_DATA** | 382 | 0.02GB | 騎手データ | 2024-2025 |
| **W5_DATA** | 840 | 0.01GB | WIN5 データ | 2011-2025 |
| **TM_DATA** | 426 | 0.01GB | タイムデータ | 2014-2025 |
| **JG_DATA** | 206 | 0.01GB | 重賞データ | 2024-2025 |
| **BS_DATA** | 301 | 0.01GB | 出走表データ | 1995-2024 |
| **BR_DATA** | 20 | 0.01GB | レース結果データ | 2020- |

---

## 🔍 CK_DATA（血統データ）のサンプル分析

### サンプルファイル: HC020241201.DAT

```
02024120103572019102163056915204171490268139129
02024120103572019105472055415304011380263134129
02024120103572019106962055114904021430259131128
02024120103572021104052060118504161510265133132
02024120103572021105536055214504071390268136132
```

### データフォーマット推定

| 位置 | 桁数 | 内容（推定） | サンプル値 |
|------|------|--------------|------------|
| 1-1 | 1 | レコード種別 | 0 |
| 2-11 | 10 | レースID（年月日+場+R） | 2024120103 |
| 12-19 | 8 | 馬番号・馬ID | 57201910 |
| 20-27 | 8 | 血統コード1（父） | 21630569 |
| 28-35 | 8 | 血統コード2（母） | 15204171 |
| 36-42 | 7 | 血統コード3（母父） | 4902681 |
| 43-47 | 5 | その他血統情報 | 39129 |

**特徴**:
- 固定長レコード（47バイト）
- レースID + 馬情報 + 血統情報の構造
- 数値のみで構成（高速パース可能）

---

## 📋 JRA-VAN データの特徴

### 1. データ量
- **総容量**: 5.64GB
- **総ファイル数**: 45,339ファイル
- **平均ファイルサイズ**: 約 130KB

### 2. データ形式
- **フォーマット**: 固定長レコード（バイナリ形式）
- **エンコーディング**: Shift-JIS（一部）
- **構造**: 年別・月別のフォルダ階層

### 3. データカバレッジ
- **最古データ**: 1936年（UM_DATA）
- **最新データ**: 2025年
- **約90年分の競馬データ**

---

## 🚀 Phase 5 実装への影響

### JRA-VAN データの活用方針

#### Option 1: 血統データ（CK_DATA）の活用【推奨】
- **優先度**: 高
- **理由**: 
  - ファクター作成に直接活用可能
  - JRDBデータとの組み合わせで強力な予測が可能
  - データ構造がシンプル（固定長）
- **実装時間**: 2-3日

#### Option 2: レース成績データ（SE_DATA/HY_DATA）の活用
- **優先度**: 中
- **理由**: 
  - 過去成績の詳細分析が可能
  - 長期トレンド分析に最適
  - データ量が大きい（3.77GB）
- **実装時間**: 3-5日

#### Option 3: 全データの統合活用
- **優先度**: 低（Phase 6以降）
- **理由**: 
  - 最も強力だが実装コストが高い
  - 初期フェーズには不要
- **実装時間**: 1-2週間

---

## 📝 次のステップ

### Phase 5-2: データフォーマット仕様の確認

**必要な作業**:
1. JRA-VAN データ仕様書の確認（E:\JRAVAN\README.TXT など）
2. 主要ファイルのバイナリ構造の解析
3. JRDB + JRA-VAN の統合テーブル設計

**推奨アクション**:
- **今すぐ開始**: JRDB のみで Phase 5 を進める（463,784件のデータで十分）
- **並行作業**: JRA-VAN データのパーサー設計（Phase 6 で実装）

---

## 🎯 CEO への推奨

### 推奨: Phase 5 を JRDB データで開始

**理由**:
1. **JRDB データは投入済み**: 463,784件のデータで RGS/AAS 計算が可能
2. **10x Mindset**: JRA-VAN データは Phase 6 で追加すれば OK
3. **48時間以内の実装**: JRDB のみなら 8-12時間で完成

**Phase 5 実装内容（JRDB のみ）**:
- ✅ RGS/AAS 計算エンジン
- ✅ ファクター作成 UI（開発者専用モード）
- ✅ 回収率分析機能
- ✅ 蹄コード・IDM・レース条件による条件設定

**Phase 6 で追加（JRA-VAN）**:
- 📅 血統ファクター（CK_DATA）
- 📅 過去成績詳細分析（SE_DATA/HY_DATA）
- 📅 WIN5 予測（W5_DATA）

---

## 🔧 データストレージルール（保存）

### 絶対原則
- **E ドライブ優先**: すべてのデータは E ドライブに保存
- **C ドライブ禁止**: C ドライブにデータを残さない
- **ルール**: C にあって E にない場合は、E に移動/コピー後に C から削除

### 現在の状態
- ✅ E:\JRAVAN: 5.64GB、45,339ファイル
- ✅ E:\JRDB: 4.16GB、25,648ファイル
- ✅ C ドライブ: クリーン（データなし）

---

**Status**: ✅ JRA-VAN データ分析完了  
**Next Action**: Phase 5 実装開始（JRDB データで RGS/AAS 計算システム）
